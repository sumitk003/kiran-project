<%= render 'console/shared/account_page_header' %>

<main class="container mx-auto">
  <%= render CardContainerComponent.new do %>
    <div class="px-4 py-5 sm:px-6 flex justify-between">
      <div>
        <div class="flex flex-row space-x-2">
          <h3 class="text-lg font-medium leading-6 text-gray-900">Agent Information</h3>
          <%= render BadgeComponent.new(text: @agent.role.humanize, color: :blue) %>
        </div>
        <p class="mt-1 max-w-2xl text-sm text-gray-500" title="<%= @agent.created_at %>">Created <%= distance_of_time_in_words_to_now(@account.created_at) %> ago.</p>
      </div>
      <div>
        <%= link_to edit_console_account_agent_path(@account, @agent), class: 'inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2' do %>
          <!-- Heroicon name: mini/pencil -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="-ml-1 mr-2 h-5 w-5">
            <path d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z" />
          </svg>
          Edit
        <% end %>
      </div>
    </div>
    <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
      <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">First name</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.first_name %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">Last name</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.last_name %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">Email address</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.email %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">Phone</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.phone %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">Mobile</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.mobile %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">Fax</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.fax %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">Currently signed in</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.current_sign_in_at.to_s %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">Current IP</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.current_sign_in_ip %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">REA Agent ID</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.rea_agent_id %></dd>
        </div>
        <div class="sm:col-span-1">
          <dt class="text-sm font-medium text-gray-500">Domain Agent ID</dt>
          <dd class="mt-1 text-sm text-gray-900"><%= @agent.domain_com_au_agent_id %></dd>
        </div>
      </dl>
    </div>
  <% end %>
</main>

<%= render Console::ContainerComponent.new do %>
<% end %>

<p>
  <h2>Contacts</h2>
  <% if @agent.visible_contacts.any? %>
    <%= render partial: 'console/contacts/contacts', locals: { contacts: @agent.visible_contacts } %>
  <% else %>
    <div>
      No contacts yet.
    </div>
  <% end %>
</p>

<p>
  <h2>Properties</h2>
  <% if @agent.properties.any? %>
    <%= render partial: 'console/properties/properties', locals: { properties: @agent.properties } %>
  <% else %>
    <div>
      No properties yet.
    </div>
  <% end %>
  <%= link_to 'Create property', [:new, :console, @account, :property] %>
</p>

<p>
  <h2>Listing Enquiries</h2>
  <% if @agent.listing_enquiries.any? %>
    <%= render partial: 'console/listing_enquiries/listing_enquiries', locals: { listing_enquiries: @agent.listing_enquiries } %>
  <% else %>
    <div>
      No listing enquiries yet.
    </div>
  <% end %>
</p>


<%= link_to 'Edit', [:edit, :console, @agent.account, @agent] %> |
<%= link_to 'Destroy', [:console, @account, @agent], data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' } %> |
<%= link_to 'Back', console_accounts_path %>
