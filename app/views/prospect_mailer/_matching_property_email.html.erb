<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
      body {
        font-size: 1.15rem;
        font-family: 'Roboto', 'Helvetica Neue', 'Segoe UI', Helvetica, Arial, sans-serif;
        line-height: 2em;
        font-weight: normal;
        font-style: normal;
        color: #333;

        max-width: 36rem;
        margin: 0 auto;
      }

      h1, h2, p {
        margin: 0;
      }

      .space-x-2 > * + * {
        margin-left: 1rem;
      }

      .list-none {
        list-style: none;
      }

      .flex {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }

      .flex-wrap {
        flex-wrap: wrap;
      }

      .justify-center {
        justify-content: center;
      }

      .inline-flex {
        display: inline-flex;
      }

      .items-center {
        align-items: center;
      }

      .bg-white {
        background-color: #fff;
      }

      .rounded {
        border-radius: 0.25rem;
      }

      .rounded-md {
        border-radius: 0.375rem;
      }

      .border {
        border-width: 1px;
        border-style: solid;
      }

      .border-gray-200 {
        border-color: #E5E7EB;
      }

      .border-transparent {
        border-color: transparent;
      }

      .p-8 {
        padding: 2rem;
      }

      .px-6 {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
      }

      .py-3 {
        padding-top: .75rem;
        padding-bottom: .75rem;
      }

      .mb-4 {
        margin-bottom: 1rem;
      }

      .shadow-md {
        box-shadow: rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0) 0px 0px 0px 0px, rgba(0, 0, 0, 0.1) 0px 4px 6px -1px, rgba(0, 0, 0, 0.06) 0px 2px 4px -1px
      }

      .text-center {
        text-align: center;
      }

      .text-base {
        font-size: 1rem;
        line-height: 1.5rem;
      }

      .text-sm {
        font-size: 0.875rem;
        line-height: 1.25rem;
      }

      .text-gray-500 {
        color: #6B7280;
      }

      .text-white {
        color: #fff;
      }

      .truncate {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .no-underline {
        text-decoration: none;
      }

      .leading-snug {
        line-height: 1.375em;
      }

      .font-bold {
        font-weight: bold;
      }

      .font-medium {
        font-weight: 500;
      }

      .w-full {
        width: 100%;
      }

      .h-auto {
        height: auto;
      }

      .bg-blue-600 {
        background-color: #2563EB;
      }

      .bg-blue-700:hover {
        background-color: #4338CA;
      }
    </style>
  </head>

  <body class="p-8">

<% if contact&.first_name&.present? %>
  <p class="mb-4">Hello <%= contact.first_name %>,</p>
<% else %>
  <p class="mb-4">Hello,</p>
<% end %>

<p class="mb-4">I have a new <%= property.type.delete_suffix('Property').downcase %> listing that you may be looking for.</p>

<p class="mb-4">Let me know if you are interested.</p>

<p class="mb-4"><%= %i[Kind Best].sample %> regards,</p>
<div class="mb-4">
  <p><%= property.agent.name %>.</p>

  <% if property.agent.mobile.present? %>
    <p class="block text-sm">Mobile:&nbsp;<%= property.agent.mobile %></p>
  <% end %>

  <% if property.agent.phone.present? %>
    <p class="block text-sm">Phone:&nbsp;<%= property.agent.phone %></p>
  <% end %>

  <% if property.agent.fax.present? %>
    <p class="block text-sm">Fax:&nbsp;<%= property.agent.fax %></p>
  <% end %>
</div>

<div class="bg-white border border-gray-200 rounded p-8 mb-4 shadow-md">
  <div class="flex mb-4">
    <h2><%= property.name %></h2>
    <p class="text-sm text-gray-500">ID:&nbsp;<%= property.internal_id %></p>
  </div>

  <% if property.images.attached? %>
    <%= image_tag property.images.first, class: 'w-full h-auto mb-4' %>
  <% end %>
  
  <div class="mb-4">
    <div class="flex">
      <p class="font-bold leading-snug"><%= property.city_and_state %></p>
      <p class="leading-snug"><span class="text-gray-500 text-sm">Total area:</span>&nbsp;<span class="font-bold"><%= property.building_area.to_i %> m<sup>2</sup></span></p>
    </div>

    <% if property.contract.present? %>
      <div class="flex">
        <% if property.contract.for_sale? %>
          <% if property.contract.sale_actual_sale_price&.positive? %>
            <p class="leading-snug"><span class="text-gray-500 text-sm">For sale:</span>&nbsp;<span class="font-bold"><%= number_to_currency(property.contract.sale_actual_sale_price, locale: :'en-AU') %></span></p>
          <% else %>
            <p class="font-bold leading-snug">For sale</p>
          <% end %>
        <% end%>

        <% if property.contract.for_lease? %>
          <% if property.contract.lease_total_net_rent&.positive? %>
            <p class="leading-snug"><span class="text-gray-500 text-sm">For lease:</span>&nbsp;<span class="font-bold"><%= number_to_currency(property.contract.lease_total_net_rent, locale: :'en-AU') %></span></p>
          <% else %>
            <p class="font-bold leading-snug">For lease</p>
          <% end %>
        <% end%>
      </div>
    <% end %>
  </div>

  <% if property.website_url&.present? %>
    <div class="p-8 flex justify-center">
      <%= tag.a('View details in your browser', href: property.website_url.html_safe, class: 'truncate inline-flex items-center px-6 py-3 border border-transparent text-base no-underline font-medium rounded-md shadow-sm text-white bg-blue-600') %>
    </div>
  <% end %>

  <div class="mb-4"><%= property.brochure_description %></div>

</div>

<p class="text-sm text-gray-500 mb-4">You are receiving this email because you have contacted <%= property.account.company_name %> and you are currently searching for commercial, industrial and/or retail properties.</p>

  </body>
</html>
