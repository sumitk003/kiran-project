<div class="space-y-6 w-full">
  <% if property_requirements.any? %>
    <%= form_tag contact_matching_properties_emails_path(@contact) do %>
      <% property_requirements.each do |property_requirement| %>
        <div class="relative">
          <!-- Sticky Property requirement section -->
          <div class="z-10 sticky top-0 border-t border-b border-gray-200 bg-gray-50 px-6 py-1 text-sm font-medium text-gray-500">
            <%= property_requirements_label(property_requirement) %>
          </div>

          <!-- List of properties -->
          <% if property_requirement.matching_properties.any? %>
            <%= render partial: 'properties/table', locals: { properties: property_requirement.matching_properties, sortable: false } %>
          <% else %>
            <div class="flex justify-center py-6">
              <p>Zero properties found</p>
            </div>
          <% end %>
        </div>
      <% end %>
      <!-- Action buttons -->
      <div class="flex justify-end space-x-4 mt-6">
        <%= render ButtonComponent.new(text: 'Back', url: @contact) %>
        <%= render SubmitButtonComponent.new(text: 'Send email', icon: :email) %>
      </div>
    <% end %>
  <% else %>
    <div class="pt-4">
      <h2 class="text-lg leading-6 font-medium text-gray-900">
        No properties found
      </h2>
    </div>
  <% end %>
</div>