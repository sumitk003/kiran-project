<%= render ErrorComponent.new(contact.errors) if contact.errors.any? %>

<%= tag.div data: { controller: 'property-requirements' } do %>
  <div class="bg-white px-4 py-5 shadow sm:rounded-lg sm:p-6">
    <div class="md:grid md:grid-cols-3 md:gap-6">
      <div class="md:col-span-1">
          <h3 class="text-lg font-medium leading-6 text-gray-900">Add a property requirement</h3>
          <p class="mt-1 text-sm text-gray-500">Add in contact property requirements.</p>
        </div>
        <div class="mt-5 md:col-span-2 md:mt-0">
          <div class="grid grid-cols-6 gap-6">

            <div class="col-span-6">
              <%= render PropertyRequirement::SearchSuburbComponent.new %>
            </div>

            <div class="col-span-6">
              <%= form_with model: contact.property_requirements.build, url: contact_property_requirements_path(contact), class: 'space-y-4' do |form| %>

                <div class="sm:col-span-6">
                  <div class="col-span-6 sm:col-span-3">
                    <%= render FormLabelComponent.new(form: form, name: :suburbs, title: 'Suburbs') %>
                    <%= tag.div data: { property_requirements_target: 'selected' }, class: 'mt-1 block w-full overflow-y-auto h-48 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm' %>
                  </div>
                </div>

                <div class="col-span-6">
                  <%= render FormLabelComponent.new(form: form, name: :contract_type, title: 'Contract type') %>
                  <fieldset class="mt-4">
                    <legend class="sr-only">Contract type</legend>
                    <div class="space-y-4">
                      <div class="flex items-center">
                        <%= form.radio_button :contract_type, :for_lease, checked: true, class: 'h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500' %>
                        <label for="email" class="ml-3 block text-sm font-medium text-gray-700">For lease</label>
                      </div>

                      <div class="flex items-center">
                        <%= form.radio_button :contract_type, :for_sale, class: 'h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500' %>
                        <label for="sms" class="ml-3 block text-sm font-medium text-gray-700">For sale</label>
                      </div>

                      <div class="flex items-center">
                        <%= form.radio_button :contract_type, :for_lease_or_sale, class: 'h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500' %>
                        <label for="push" class="ml-3 block text-sm font-medium text-gray-700">For lease or sale</label>
                      </div>
                    </div>
                  </fieldset>
                </div>

                <div class="sm:col-span-6">
                  <div class="col-span-6 sm:col-span-3">
                    <%= form.label :district, class: 'block text-sm font-medium text-gray-700' %>
                    <%= form.collection_select :district_id, District.all.order(:name), :id, :name, { include_blank: 'None' }, { class: 'mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm' } %>
                  </div>
                </div>

                <div class="sm:col-span-6">
                  <div class="col-span-6 sm:col-span-3">
                    <%= form.label :classification, class: 'block text-sm font-medium text-gray-700' %>
                    <%= form.select :classification, ['Commercial', 'Industrial', 'Residential', 'Retail'], {}, { class: 'mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm' } %>
                  </div>
                </div>

                <div class="col-span-6 flex space-x-4">
                  <div>
                    <%= render FormLabelComponent.new(form: form, name: :area_from) %>
                    <%= render FormTextFieldComponent.new(form: form, name: :area_from, autocomplete: 'area-from') %>
                  </div>
                  <div>
                    <%= render FormLabelComponent.new(form: form, name: :area_to) %>
                    <%= render FormTextFieldComponent.new(form: form, name: :area_to, autocomplete: 'area-to') %>
                  </div>
                </div>

                <div class="col-span-6 flex space-x-4">
                  <div>
                    <%= render FormLabelComponent.new(form: form, name: :price_from) %>
                    <%= render FormTextFieldComponent.new(form: form, name: :price_from, autocomplete: 'price-from') %>
                  </div>
                  <div>
                    <%= render FormLabelComponent.new(form: form, name: :price_to) %>
                    <%= render FormTextFieldComponent.new(form: form, name: :price_to, autocomplete: 'area-to') %>
                  </div>
                </div>

                <div class="flex justify-end">
                  <%= form.submit 'Add', class: 'ml-3 inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2' %>
                </div>
              <% end %>
            </div>
          </div>
        </div>
    </div>
  </div>
<% end %>
